!function(n){n.fn.mauGallery=function(e){var e=n.extend(n.fn.mauGallery.defaults,e),t=[];return this.each(function(){n.fn.mauGallery.methods.createRowWrapper(n(this)),e.lightBox&&n.fn.mauGallery.methods.createLightBox(n(this),e.lightboxId,e.navigation),n.fn.mauGallery.listeners(e),n(this).children(".gallery-item").each(function(){n.fn.mauGallery.methods.responsiveImageItem(n(this)),n.fn.mauGallery.methods.moveItemInRowWrapper(n(this)),n.fn.mauGallery.methods.wrapItemInColumn(n(this),e.columns);var i=n(this).data("gallery-tag");e.showTags&&void 0!==i&&-1===t.indexOf(i)&&t.push(i)}),e.showTags&&n.fn.mauGallery.methods.showItemTags(n(this),e.tagsPosition,t),n(this).fadeIn(500)})},n.fn.mauGallery.defaults={columns:3,lightBox:!0,lightboxId:null,showTags:!0,tagsPosition:"bottom",navigation:!0},n.fn.mauGallery.listeners=function(e){n(".gallery-item").on("click",function(){e.lightBox&&"IMG"===n(this).prop("tagName")&&n.fn.mauGallery.methods.openLightBox(n(this),e.lightboxId)}),n(".gallery").on("click",".nav-link",n.fn.mauGallery.methods.filterByTag),n(".gallery").on("click",".mg-prev",()=>n.fn.mauGallery.methods.prevImage(e.lightboxId)),n(".gallery").on("click",".mg-next",()=>n.fn.mauGallery.methods.nextImage(e.lightboxId))},n.fn.mauGallery.methods={createRowWrapper:function(e){e.children().first().hasClass("row")||e.append('<div class="gallery-items-row row"></div>')},wrapItemInColumn:function(e,t){if(Number.isInteger(t)){e.wrap(`<div class='item-column mb-4 col-${Math.ceil(12/t)}'></div>`)}else if("object"==typeof t){var i="";t.xs&&(i+=` col-${Math.ceil(12/t.xs)}`),t.sm&&(i+=` col-sm-${Math.ceil(12/t.sm)}`),t.md&&(i+=` col-md-${Math.ceil(12/t.md)}`),t.lg&&(i+=` col-lg-${Math.ceil(12/t.lg)}`),t.xl&&(i+=` col-xl-${Math.ceil(12/t.xl)}`),e.wrap(`<div class='item-column mb-4${i}'></div>`)}else console.error(`Columns should be defined as numbers or objects. ${typeof t} is not supported.`)},moveItemInRowWrapper:function(n){n.appendTo(".gallery-items-row")},responsiveImageItem:function(n){"IMG"===n.prop("tagName")&&n.addClass("img-fluid")},openLightBox:function(e,t){n(`#${t}`).find(".lightboxImage").attr("src",e.attr("src")),n(`#${t}`).modal("toggle")},prevImage:function(){let e=null;n("img.gallery-item").each(function(){n(this).attr("src")===n(".lightboxImage").attr("src")&&(e=n(this))});let t=n(".tags-bar span.active-tag").data("images-toggle"),i=[];"all"===t?n(".item-column").each(function(){n(this).children("img").length&&i.push(n(this).children("img"))}):n(".item-column").each(function(){n(this).children("img").data("gallery-tag")===t&&i.push(n(this).children("img"))});let a=0,l=null;n(i).each(function(e){n(e).attr("src")===e.attr("src")&&(a=e-1)}),l=i[a]||i[i.length-1],n(".lightboxImage").attr("src",n(l).attr("src"))},nextImage:function(){let e=null;n("img.gallery-item").each(function(){n(this).attr("src")===n(".lightboxImage").attr("src")&&(e=n(this))});let t=n(".tags-bar span.active-tag").data("images-toggle"),i=[];"all"===t?n(".item-column").each(function(){n(this).children("img").length&&i.push(n(this).children("img"))}):n(".item-column").each(function(){n(this).children("img").data("gallery-tag")===t&&i.push(n(this).children("img"))});let a=0,l=null;n(i).each(function(e){n(e).attr("src")===e.attr("src")&&(a=e+1)}),l=i[a]||i[0],n(".lightboxImage").attr("src",n(l).attr("src"))},createLightBox:function(e,t,i){e.append(`<div class="modal fade" id="${t?t:"galleryLightbox"}" tabindex="-1" role="dialog" aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-body">
                            ${i?'<div class="mg-prev" style="cursor:pointer;position:absolute;top:50%;left:-15px;background:white;"><</div>':'<span style="display:none;" />'}
                            <img class="lightboxImage img-fluid" alt="Contenu de l'image affichÃ©e dans la modale au clique"/>
                            ${i?'<div class="mg-next" style="cursor:pointer;position:absolute;top:50%;right:-15px;background:white;}">></div>':'<span style="display:none;" />'}
                        </div>
                    </div>
                </div>
            </div>')},showItemTags:function(e,t,i){var a='<li class="nav-item"><span class="nav-link active active-tag"  data-images-toggle="all">Tous</span></li>';n.each(i,function(e,t){a+=`<li class="nav-item active">
                <span class="nav-link"  data-images-toggle="${t}">${t}</span></li>`});var l=`<ul class="my-4 tags-bar nav nav-pills">${a}</ul>`;"bottom"===t?e.append(l):"top"===t?e.prepend(l):console.error(`Unknown tags position: ${t}`)},filterByTag:function(){if(n(this).hasClass("active-tag"))return;n(".active.active-tag").removeClass("active active-tag"),n(this).addClass("active-tag active");var e=n(this).data("images-toggle");n(".gallery-item").each(function(){n(this).parents(".item-column").hide(),"all"===e?n(this).parents(".item-column").show(300):n(this).data("gallery-tag")===e&&n(this).parents(".item-column").show(300)})}}}(jQuery);
